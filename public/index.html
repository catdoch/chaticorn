<html>
    <head>
        <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.js"></script>
        <script type="text/javascript" charset="utf-8">

            $(document).ready(function(){

            var socket = io.connect();

            socket.on('connect', function(){
                // call the server-side function 'adduser' and send one parameter (value of prompt)
                socket.emit('adduser', swal("Here's a message!"));
            });

            socket.on('updatechat', function (username, data) {
                $('#conversation').append('<li><b>'+ username + ':</b><p> ' + data + '</p></li>');
            });

            socket.on('updateusers', function(data) {
                $('#users').empty();
                $.each(data, function(key, value) {
                    $('#users').append('<div>' + key + '</div>');
                });
            });

            socket.on('exit', function(data) {
                log_chat_message(data.message);
            });

            $('#datasend').click( function() {
                var message = $('#data').val();
                $('#data').val('');
                // tell server to execute 'sendchat' and send along one parameter
                socket.emit('sendchat', message);
            });

            // when the client hits ENTER on their keyboard
            $('#data').keypress(function(e) {
                if(e.which == 13) {
                    $(this).blur();
                    $('#datasend').focus().click();
                }
            });
        });

    </script>
    <style type="text/css" media="screen">
        #userList{
            height: 300px;
            overflow-y: scroll;
            border: 1px solid #999;
            overflow: auto;
            width: 25%;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        #userList h4{
            padding: 10px;
            margin:0px;
        }
        #userList #users div{
            padding: 10px;
        }
        div#chatroom {
            min-height: 300px;
            border: 1px solid #999;
            overflow: none;
            width: 70%;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        ul#conversation {
            list-style: none;
            position: absolute;
            bottom: 0px;
            width: 100%;
            top:0;
            overflow: auto;
            padding: 0px;
        }
        ul li p, b{
            display: inline-block;
        }
        p,b{
            padding-right: 5px;
        }
        input#data {
            padding: 20px;
            width: 45%;
            height: auto;
            padding: 10px;
        }
        button{
            width: 5%;
            padding: 12px;
        }
        #conversation { 
            list-style-type: none; margin: 0; padding: 0; 
        }
        #conversation li { 
            padding: 5px 10px; 
            background: #fff;
        }
        #conversation li:nth-child(odd) { 
            background: lemonchiffon; 
        }

    </style>
        </head>
        <body>
            <div id="userList">
                <h4>Users Online</h4>
                <div id="users"></div>
            </div>

            <div id="chatroom">
                <ul id="conversation">
                </ul>
            </div>
            <input type="text" name="chat_box" value="" id="data" placeholder="type to chat..." /><button id="datasend">Send</button>
        </body>
    </html>
